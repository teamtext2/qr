<!DOCTYPE html>
<html lang="vi" class="">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- SEO Meta Tags -->
    <title>Trình tạo mã QR - Hiện đại & Miễn phí | Text2</title>
    <meta name="description" content="Tạo mã QR miễn phí với giao diện hiện đại, nhanh chóng. Dễ dàng tạo QR cho URL, văn bản, số điện thoại và nhiều loại dữ liệu khác. Tùy chỉnh màu sắc và tải xuống ngay lập tức." />
    <meta name="keywords" content="tạo mã qr, trình tạo qr, qr code generator, miễn phí qr code, qr code online" />
    <meta name="author" content="Text2" />
    <meta name="robots" content="index, follow" />

    <!-- Google tag (gtag.js) - GA4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ABCDEFG123"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-6J85STMJ14');
    </script>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://placehold.co/180x180/000000/FFFFFF/png?text=T2">
    <link rel="icon" type="image/png" sizes="32x32" href="https://placehold.co/32x32/000000/FFFFFF/png?text=T2">
    <link rel="icon" type="image/png" sizes="16x16" href="https://placehold.co/16x16/000000/FFFFFF/png?text=T2">

    <!-- Tailwind CSS & Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- QR & Color Picker Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/classic.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/pickr.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for a more modern feel */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        .dark ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        
        /* Custom styles for the color picker to match the theme */
        .pickr .pcr-button {
            height: 48px;
            width: 100%;
            border-radius: 0.75rem; /* rounded-xl */
            transition: all 0.2s ease-in-out;
            border: 1px solid #e2e8f0; /* slate-200 */
        }
        .dark .pickr .pcr-button {
            border: 1px solid #334155; /* slate-700 */
        }
        .pickr .pcr-button:hover {
            border-color: #3b82f6; /* blue-500 */
        }
        .pickr .pcr-button::before,
        .pickr .pcr-button::after {
            border-radius: 0.75rem;
        }

        /* Animation for the QR code appearance */
        .qr-pop-in {
            animation: popIn 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
        }
        @keyframes popIn {
            0% {
                opacity: 0;
                transform: scale(0.95);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* Details/Summary accordion styling */
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details .summary-icon {
            transition: transform 0.2s ease-in-out;
        }
        details[open] .summary-icon {
            transform: rotate(180deg);
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 transition-colors duration-300">

    <!-- Header -->
    <header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-lg border-b border-slate-200 dark:border-slate-800 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <a href="#" class="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-indigo-600">
                    Text2 QR
                </a>
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-slate-50 dark:focus:ring-offset-slate-900">
                    <svg id="sun-icon" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                    <svg id="moon-icon" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main App Layout -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        <div class="text-center mb-10">
            <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 dark:text-white leading-tight">Trình Tạo Mã QR Siêu Cấp</h1>
            <p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600 dark:text-slate-400">
                Chỉ cần dán nội dung, tùy chỉnh một chút là có ngay mã QR xịn sò.
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 lg:gap-12 items-start">

            <!-- Controls Panel -->
            <div class="lg:col-span-3 bg-white dark:bg-slate-800/50 p-6 md:p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700">
                <div class="space-y-6">
                    <!-- Content Input -->
                    <div>
                        <label for="textInput" class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2">
                            1. Nhập nội dung (URL, văn bản, số điện thoại,...)
                        </label>
                        <textarea id="textInput" rows="5" class="w-full p-4 bg-slate-100 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 placeholder-slate-400" placeholder="https://text2.click"></textarea>
                    </div>

                    <!-- Customization Accordion -->
                    <details class="group">
                        <summary class="flex items-center justify-between cursor-pointer py-2">
                            <span class="text-sm font-semibold text-slate-700 dark:text-slate-300">2. Tùy chỉnh màu sắc (tùy chọn)</span>
                             <svg class="h-5 w-5 text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-200 summary-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                            </svg>
                        </summary>
                        <div class="pt-4 grid sm:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-2">Màu mã QR</label>
                                <div id="darkColor"></div>
                            </div>
                             <div>
                                <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-2">Màu nền</label>
                                <div id="lightColor"></div>
                            </div>
                        </div>
                    </details>
                </div>
            </div>

            <!-- QR Code Preview Panel -->
            <div class="lg:col-span-2 sticky top-24">
                <div id="qr-preview-card" class="bg-white dark:bg-slate-800/50 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700">
                    <h3 class="font-bold text-lg text-slate-900 dark:text-white mb-4">3. Xem trước và Tải về</h3>
                    
                    <!-- Placeholder -->
                    <div id="qr-placeholder" class="aspect-square bg-slate-100 dark:bg-slate-800 rounded-xl flex flex-col items-center justify-center text-center p-4 transition-all duration-300">
                        <svg class="w-16 h-16 text-slate-300 dark:text-slate-600 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4v16m8-8H4" />
                        </svg>
                        <p class="text-sm font-medium text-slate-500 dark:text-slate-400">Mã QR của bạn sẽ xuất hiện ở đây</p>
                    </div>

                    <!-- QR Code & Download Button -->
                    <div id="qr-result-container" class="hidden">
                        <div class="p-4 bg-white rounded-xl shadow-inner aspect-square qr-pop-in">
                            <div id="qrcode" class="flex justify-center items-center h-full"></div>
                        </div>
                        <a id="downloadLink" class="mt-6 w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition duration-200 transform hover:scale-102 active:scale-98 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-slate-50 dark:focus:ring-offset-slate-900" download="qr-code.png">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                            Tải về PNG
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="mt-16 pb-8 text-center text-sm text-slate-500 dark:text-slate-400">
        <p>&copy; 2024 Text2 - Một sản phẩm của CEO Hóa Nhật Anh.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Elements ---
            const textInput = document.getElementById('textInput');
            const qrPlaceholder = document.getElementById('qr-placeholder');
            const qrResultContainer = document.getElementById('qr-result-container');
            const qrContainer = document.getElementById('qrcode');
            const downloadLink = document.getElementById('downloadLink');
            const themeToggle = document.getElementById('theme-toggle');
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');

            let debounceTimer;

            // --- Theme Management ---
            const userTheme = localStorage.getItem('theme');
            const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches;

            const themeCheck = () => {
                if (userTheme === 'dark' || (!userTheme && systemTheme)) {
                    document.documentElement.classList.add('dark');
                    moonIcon.classList.add('hidden');
                    sunIcon.classList.remove('hidden');
                } else {
                    document.documentElement.classList.remove('dark');
                    moonIcon.classList.remove('hidden');
                    sunIcon.classList.add('hidden');
                }
            };

            const themeSwitch = () => {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                }
                themeCheck();
            };

            themeToggle.addEventListener('click', themeSwitch);
            themeCheck();

            // --- Color Pickers ---
            const createPicker = (el, defaultColor) => {
                return Pickr.create({
                    el,
                    theme: 'classic',
                    default: defaultColor,
                    swatches: [
                        '#000000', '#FFFFFF', '#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'
                    ],
                    components: {
                        preview: true,
                        opacity: true,
                        hue: true,
                        interaction: {
                            hex: true,
                            rgba: true,
                            input: true,
                            save: true
                        }
                    }
                }).on('save', () => generateQR());
            };
            const darkPicker = createPicker('#darkColor', '#000000');
            const lightPicker = createPicker('#lightColor', '#ffffff');


            // --- QR Code Generation ---
            const generateQR = () => {
                const text = textInput.value.trim();
                if (!text) {
                    qrPlaceholder.classList.remove('hidden');
                    qrResultContainer.classList.add('hidden');
                    return;
                }

                const darkColor = darkPicker.getColor().toHEXA().toString();
                const lightColor = lightPicker.getColor().toHEXA().toString();
                
                qrContainer.innerHTML = ''; // Clear previous QR

                QRCode.toCanvas(text, {
                    width: 500, // High resolution for better quality
                    margin: 1,
                    color: {
                        dark: darkColor,
                        light: lightColor
                    },
                    errorCorrectionLevel: 'H' // High
                }, function (error, canvas) {
                    if (error) {
                        console.error(error);
                        alert("Đã xảy ra lỗi khi tạo mã QR. Thử lại sau nhé!");
                        return;
                    }
                    
                    canvas.style.width = "100%";
                    canvas.style.height = "auto";
                    canvas.style.borderRadius = "0.75rem"; // rounded-xl
                    qrContainer.appendChild(canvas);

                    // Update UI
                    qrPlaceholder.classList.add('hidden');
                    qrResultContainer.classList.remove('hidden');

                    // Set download link
                    const dataUrl = canvas.toDataURL('image/png');
                    downloadLink.href = dataUrl;
                    downloadLink.download = `qr-code-text2-${Date.now()}.png`;
                });
            };

            // --- Event Listeners ---
            textInput.addEventListener('input', () => {
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(generateQR, 300); // Debounce for smoother experience
            });
            
            // Generate QR with Ctrl+Enter
            textInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {
                   e.preventDefault();
                   clearTimeout(debounceTimer);
                   generateQR();
                }
            });
        });
    </script>
</body>
</html>
